version: "2.4"

services:
  iac-express:
      build:
        context: .
        target: dev
        args:
          - NODE_ENV=development
        dockerfile: ./express.Dockerfile
      ports:
        - 3001:3001
      volumes:
        - ./iac/.:/node/app
        - /node/app/node_modules
      env_file:
        - ./.env/app.development.env

  iac-mongo:
    build:
      context: .
      dockerfile: ./mongo.Dockerfile
    command: --auth --port 27018
    ports: 
      - 27018:27018
    env_file:
      - ./.env/app.development.env